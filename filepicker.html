<input type="file" id="files" name="files[]" multiple />
<output id="list"></output>
<title>Desktop to YouTube </title>
<h3>Matched Videos</h3>
<div id="videos"></div>
<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script> 
<script type="text/javascript">
  var songNames = new Array();
  var newPage="";
  
  function handleFileSelect(data) {
    var files = data.target.files; // FileList object
    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      songNames[i] = escape((f.name).substring(0, (f.name).lastIndexOf('.')));
      output.push('<li><strong>',songNames[i] , '</strong>','</li>');
    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
    youtubeRequest();
  }
   

  function showMyVideos(data) {
      console.log(JSON.stringify(data));
      var entries = data.data.items;
      var videoAdded = document.getElementById('videos');
      var html = ['<ul>'];
      
      for (var i = 0; i < entries.length; i++) {
        var entry = entries[i];
        var title = entry.title;
        var id = entry.id;
        //alert(id);
        var videoPlayer = entry.player.default;
        console.log(videoPlayer);
       newPage+="<div><iframe id='ytplayer' type='text/html' width='640' height='390' src='http://www.youtube.com/embed/"+ id +"' frameborder='0'></iframe></div>";
        html.push('<li>','<a href=',videoPlayer,'>',title, '</a></li>');
     }
     html.push('</ul>');
    document.getElementById('videos').innerHTML += html.join('');
    //alert(newPage);
    v
  }
  function youtubeRequest(){
    for(var i=0;i<songNames.length;i++){
      var requestURL = "http://gdata.youtube.com/feeds/api/videos?q=" + songNames[i] + "&alt=jsonc&max-results=1&callback=showMyVideos&v=2";
      console.log("Creating GET Request");  
      $.get(requestURL);
    }

  var opened = window.open("results.html");
  opened.document.write(newPage);
  }
  document.getElementById('files').addEventListener('change', handleFileSelect, false);
 </script>